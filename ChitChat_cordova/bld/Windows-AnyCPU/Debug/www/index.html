<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width" />
	<title></title>

	<link href="lib/ionic/css/ionic.css" rel="stylesheet" />
	<link href="css/style.css" rel="stylesheet" />

	<!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
	<link href="css/ionic.app.css" rel="stylesheet" />
	-->
	<!-- ionic/angularjs js -->
	<script src="lib/ionic/js/ionic.bundle.js"></script>

	<!-- cordova script (this will be a 404 during development) -->
	<script src="cordova.js"></script>

	<!-- your app's js -->
	<script src="js/app.js"></script>
	<script src="js/controllers.js"></script>
	<script src="js/services.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/require.js" data-main="scripts/appBundle"></script>
	<script src="scripts/appBundle.js"></script>

	<style type="text/css">
		#login {
			float: left;
			display: inline-block;
			width: 100%;
			height: 100vh;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 100;
			background-color: #fff;
			background: -webkit-linear-gradient(rgba(255,255,255,1), #519cd3); /* For Safari 5.1 to 6.0 */
			background: -o-linear-gradient(rgba(255,255,255,1), #519cd3); /* For Opera 11.1 to 12.0 */
			background: -moz-linear-gradient(rgba(255,255,255,1), #519cd3); /* For Firefox 3.6 to 15 */
			background: linear-gradient(rgba(255,255,255,1), #519cd3); /* Standard syntax (must be last) */
		}

			#login .container {
				max-width: 600px;
				margin-top: 10vh;
			}

				#login .container form {
					max-width: 300px;
					margin: 30px auto 0;
				}

			#login .message {
				line-height: 30px;
				margin: 5px 0 0;
				font-weight: normal;
				opacity: 1;
				color: #f00;
			}

			#login .container {
				float: none;
				display: table;
				width: 100%;
				max-width: 1000px;
				margin: 0 auto;
				text-align: center;
			}

			#login .login-logo {
				margin-top: 5vh;
				max-width: 200px;
			}

			#login form {
				float: none;
				display: inline-block;
				width: 100%;
				text-align: center;
			}

				#login form > * {
					float: left;
					display: inline;
					width: 100%;
				}

				#login form .form-control {
					float: none;
					display: inline-block;
					width: 90%;
					max-width: 300px;
					margin: 0 0 10px;
					padding: 0 5%;
					border-radius: 20px;
				}

				#login form button {
					float: none;
					display: block;
					width: 100%;
					max-width: 100px;
					margin: 0 auto;
					line-height: 30px;
					border-radius: 10px;
					background-color: #001A66;
					color: #fff;
					box-shadow: none;
					background: -webkit-linear-gradient(#6676A3, #001F7A); /* For Safari 5.1 to 6.0 */
					background: -o-linear-gradient(#6676A3, #001F7A); /* For Opera 11.1 to 12.0 */
					background: -moz-linear-gradient(#6676A3, #001F7A); /* For Firefox 3.6 to 15 */
					background: linear-gradient(#6676A3, #001F7A); /* Standard syntax (must be last) */
				}

		border:none;
		}
	</style>

</head>
<body ng-app="starter">    
	
	<!--    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script> // Not support with newer version of socket.io -->
	<script src="js/socket.io.js"></script>
	<script>
		var socket = io;
		var server = new ChatServer.ServerImplemented();
		var authen = server.authenData;
	</script>

	<div id="login">
		<div class="container">
			<img class="login-logo" src="img/logo-main.png" width="40%" />
			<form>
				<div>
					<input class="form-control" type="email" name="email" placeholder="Email" />
				</div>
				<div>
					<input class="form-control" type="password" name="password" placeholder="Password" />
				</div>
				<button id="btn-login" class="btn btn-primary btn-block btn-flat">Sign In</button>
			</form>
		</div>
	</div>

	<script type="text/javascript">

		$('#btn-login').click(function (event) {
			event.preventDefault();

			$('input').attr('readonly', true);
			email = $('form input[name="email"]').val();
			password = $('form input[name="password"]').val();

			server.logIn(email, password, (err, res) => {			
				if (!err && res !== null) {
				    document.getElementById('login').style.display = 'none';

				    var main = new Main().startChatServerListener();

					server.GetMe((err, res) => {
						console.log("get me: ", res);
					});

					server.getCompanyInfo((err, res) => {
					    if (err || res === null) {
					        console.error(err);
					    }
					    else {
					        console.log("companyInfo: ", res);
					    }
					});

					server.getOrganizationGroups((err, res) => {
					    if (err || res === null) {
					        console.error(err);
					    }
					    else {
					        console.log("organize groups: ", res);
					    }
					});

					server.getProjectBaseGroups((err, res) => {
					    if (err || res === null) {
					        console.error(err);
					    }
					    else {
					        console.log("project base groups: ", res);
					    }
					});

					server.getPrivateGroups((err, res) => {
					    if (err || res === null) {
					        console.error(err);
					    }
					    else {
					        console.log("Private groups: ", res);
					    }
					});
				}
				else {
					console.log(err);
				}
			});
		});

	</script>

	<!--
	The nav bar that will be updated as we navigate between views.
	-->
	<ion-nav-bar class="bar-stable">
		<ion-nav-back-button>
		</ion-nav-back-button>
	</ion-nav-bar>
	<!--
	The views will be rendered in the <ion-nav-view> directive below
	Templates are in the /templates folder (but you could also
	have templates inline in this html file if you'd like).
	-->
	<ion-nav-view></ion-nav-view>
</body>
</html>
